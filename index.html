<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로또 번호 네트워크 분석기</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body{font-family:'Inter','Noto Sans KR',sans-serif;background:#1a1a2e;color:#e0e0e0}
        .graph-container{width:100%;height:65vh;max-height:700px;border-radius:1rem;background:#162447;box-shadow:0 10px 20px rgba(0,0,0,0.3);position:relative;overflow:hidden}
        .tooltip{position:absolute;text-align:center;width:auto;height:auto;padding:8px 12px;font-size:14px;background:rgba(255,255,255,0.9);color:#333;border:0;border-radius:8px;pointer-events:none;opacity:0;transition:opacity 0.2s;box-shadow:0 2px 5px rgba(0,0,0,0.2)}
        .lotto-ball{width:40px;height:40px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-weight:bold;color:#111;margin:0 5px;box-shadow:inset -3px -3px 5px rgba(0,0,0,0.2);transition:transform 0.3s ease}
        .lotto-ball:hover{transform:scale(1.1) translateY(-2px)}
        .btn-gradient{background:linear-gradient(to right,#4facfe 0%,#00f2fe 100%);transition:all 0.3s ease}
        .btn-gradient:hover{box-shadow:0 0 20px #00f2fe;transform:translateY(-2px)}
        .btn-gradient:disabled{background:linear-gradient(to right,#888 0%,#aaa 100%);cursor:not-allowed}
        #loader{transition:opacity 0.5s ease-out}
        .no-select{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
        .no-copy{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent}
        .protect{position:relative}.protect::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:9999;pointer-events:none}
        .hidden-code{display:none!important}
    </style>
</head>
<body class="p-4 md:p-8 no-select">
    <div class="max-w-7xl mx-auto text-center relative">
        <!-- 방문자 카운터 -->
        <div class="absolute top-0 right-0 flex flex-col items-end space-y-1 text-sm text-gray-300 no-copy">
            <div class="bg-gray-800/50 px-3 py-1 rounded-lg backdrop-blur-sm">
                <span class="text-blue-400">👥 Total:</span> <span id="total-visitors" class="font-bold text-white">0</span>
            </div>
            <div class="bg-gray-800/50 px-3 py-1 rounded-lg backdrop-blur-sm">
                <span class="text-green-400">📅 Today:</span> <span id="today-visitors" class="font-bold text-white">0</span>
            </div>
        </div>
        
        <h1 class="text-3xl md:text-4xl font-bold mb-2 text-white no-copy">AI 운세 로또 번호 분석기</h1>
        <p id="data-info" class="text-lg text-gray-400 mb-4 no-copy">네트워크 그래프로 보는 로또 번호의 숨은 관계</p>
        
        <!-- 최근 당첨 번호 표시 -->
        <div id="recent-wins" class="mb-6 space-y-3 opacity-0 transition-opacity duration-500">
            <h3 class="text-xl font-bold text-yellow-400 mb-3 no-copy">🎯 최근 3회차 당첨 번호</h3>
            <div id="recent-wins-list" class="space-y-2"></div>
        </div>

        <div class="graph-container mb-6 protect" id="graph">
            <div id="loader" class="absolute inset-0 bg-gray-900/80 flex flex-col items-center justify-center z-50">
                <svg class="animate-spin h-10 w-10 text-white mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <p class="text-white text-xl no-copy">최신 실제 당첨 데이터를 불러오는 중입니다...</p>
                <p id="loading-progress" class="text-gray-300 mt-2 no-copy"></p>
            </div>
        </div>
        <div class="tooltip no-copy" id="tooltip"></div>

        <div class="bg-[#162447] p-6 rounded-2xl shadow-lg protect">
            <button id="draw-button" class="w-full md:w-auto px-12 py-4 text-xl font-bold text-white rounded-full btn-gradient mb-6 no-copy" disabled>
                ✨ 번호 추첨 및 운세 보기
            </button>

            <div id="result" class="min-h-[150px] flex flex-col items-center justify-center p-4 bg-gray-800/50 rounded-lg opacity-0 transition-opacity duration-500 no-copy">
                <div id="picked-numbers" class="mb-4 flex flex-wrap justify-center items-center no-copy"></div>
                <p id="fortune-message" class="text-lg md:text-xl text-yellow-300 font-semibold no-copy"></p>
            </div>
        </div>
    </div>

    <script>
        // 보안: 개발자 도구 감지 및 차단
        (function(){
            let devtools = {open: false, orientation: null};
            const threshold = 160;
            setInterval(function(){
                if(window.outerHeight - window.innerHeight > threshold || window.outerWidth - window.innerWidth > threshold){
                    if(!devtools.open){
                        devtools.open = true;
                        document.body.innerHTML = '<div style="display:flex;justify-content:center;align-items:center;height:100vh;background:#1a1a2e;color:white;font-size:24px;">개발자 도구가 감지되었습니다.</div>';
                    }
                }
            }, 500);
            
            // 우클릭 방지
            document.addEventListener('contextmenu', e => e.preventDefault());
            // F12, Ctrl+Shift+I, Ctrl+U 등 키보드 단축키 방지
            document.addEventListener('keydown', function(e){
                if(e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I') || (e.ctrlKey && e.key === 'U')){
                    e.preventDefault();
                    return false;
                }
            });
        })();
    </script>
    
    <script src="/app.js"></script>
</body>
</html>
